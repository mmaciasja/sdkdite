{
  "name": "Cursed Ground",
  "type": "script",
  "scope": "global",
  "command": "const modifiers = {\n  strength: 0,\n  constitution: 0,\n  dexterity: 0,\n  charisma: 0,\n  intelligence: 0,\n  strike: 0,\n  insight: 0,\n  speed: 0,\n  defense: 0,\n  will: -2,\n  health: -10,\n  power: 0\n};\n\nconst tokens = canvas.tokens.controlled;\nif (tokens.length === 0) {\n  ui.notifications.warn(\"Select tokens first!\");\n} else {\n  for (const token of tokens) {\n    if (token.actor) {\n      await token.document.setFlag(\"sdkdite\", \"regionModifiers\", {\n        regionId: \"cursed-ground\",\n        modifiers: modifiers\n      });\n      token.actor.prepareData();\n      if (token.actor.sheet?.rendered) token.actor.sheet.render(false);\n    }\n  }\n  ChatMessage.create({\n    content: `<div class=\"sdkdite region-entry\"><h3>Cursed Ground</h3><p><strong>Tokens:</strong> ${tokens.map(t => t.name).join(\", \")}</p><p class=\"modifiers\">-2 Will, -10 Health</p></div>`,\n    speaker: { alias: \"Region Effect\" }\n  });\n  ui.notifications.info(`Applied Cursed Ground to ${tokens.length} token(s)`);\n}",
  "img": "icons/svg/skull.svg",
  "_id": "000mcrrgn005curs",
  "_key": "!macros!000mcrrgn005curs"
}
